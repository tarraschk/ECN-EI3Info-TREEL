//---------------------------------------------------------------------------*
//                                                                           *
//  Task Context struct for ARM                                              *
//                                                                           *
//---------------------------------------------------------------------------*

#ifndef TASK_CONTEXT_STRUCT_FOR_ARM_DEFINED
#define TASK_CONTEXT_STRUCT_FOR_ARM_DEFINED

//---------------------------------------------------------------------------*

#include "processor-defines.h"

//---------------------------------------------------------------------------*
//   Force C linking for C++ compilation                                     *
//---------------------------------------------------------------------------*

#ifdef __cplusplus
  extern "C" {
#endif

//---------------------------------------------------------------------------*
//                                                                           *
//   T A S K    C O N T E X T                                                *
//                                                                           *
//---------------------------------------------------------------------------*
//                                           *---------------------* +68
//                                           | PC_USR              | +64 [16]
//                                           | R12                 | +60 [15]
//                                           | R11                 | +56 [14]
//                                           | R10                 | +52 [13]
//                                           | R9                  | +48 [12]
//                                           | R8                  | +44 [11]
//                                           | R7                  | +40 [10]
//                                           | R6                  | +36 [ 9]
//                                           | R5                  | +32 [ 8]
//                                           | R4                  | +28 [ 7]
//                                           | R3                  | +24 [ 6]
//                                           | R2                  | +20 [ 5]
//                                           | R1                  | +16 [ 4]
//                                           | R0                  | +12 [ 3]
//                                           | LR_USR              | + 8 [ 2]
// *--------------------------------*        | SP_USR              | + 4 [ 1]
// |                                +------> | CPSR                | + 0 [ 0]
// *--------------------------------*        *---------------------*

//---------------------------------------------------------------------------*

typedef struct {
  uint32 mCPSR ;
  uint32 mSP_USR ;
  uint32 mLR_USR ;
  uint32 mR0 ;
  uint32 mR1 ;
  uint32 mR2 ;
  uint32 mR3 ;
  uint32 mR4 ;
  uint32 mR5 ;
  uint32 mR6 ;
  uint32 mR7 ;
  uint32 mR8 ;
  uint32 mR9 ;
  uint32 mR10 ;
  uint32 mR11 ;
  uint32 mR12 ;
  uint32 mPC_USR ;
} task_context ;

//---------------------------------------------------------------------------*

void kernel_set_return_code (task_context * inTaskContext,
                             const uint32 inReturnCode) ;

//---------------------------------------------------------------------------*
//   End of force C linking for C++ compilation                              *
//---------------------------------------------------------------------------*

#ifdef __cplusplus
  }
#endif

//---------------------------------------------------------------------------*

#endif
